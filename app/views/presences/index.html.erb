<p id="notice"><%= notice %></p>

<h1>Presences</h1>
<% if @presence %>
<h2>Cours
    <% if @presence.cour.typcours == 0 %>
        Adultes
    <% elsif @presence.cour.typcours == 1 %>
        Enfants
    <% elsif @presence.cour.typcours == 2 %>
        Mixte
    <% end %>
    <%= @presence.cour.nomvil %>
</h2>
<div class="row">
    <div class="col-3">
        <table class="table table-striped">
              <thead>
                <tr>
                    <th>Nom</th>
                    <th>Prenom</th>
                </tr>
              </thead>
              <tbody>
              <% @presence.eleves.each do |elefe|  %>
                  <tr>
                      <td><%= link_to elefe.nom, elefe_path(elefe.id) %></td>
                      <td><%= elefe.prenom %></td>
                  </tr>
              <% end %>
              </tbody>
              <tbody>
                <tr>
                    <td><strong>Encadrant</strong></td>
                    <td></td>
                </tr>
              </tbody>
        </table>
    </div>


<div class="col-9">
<div id="index_presences">
<table class="table table-striped">
    <thead>
    <tr>
        <% @presences.each do |presence| %>
            <% date = presence.datecours.day.to_s+'/'+presence.datecours.month.to_s %>
            <td><%= link_to date, presence, method: :delete, data: { confirm: 'Supprimer les présences du '+date+' ?' } %></td>
        <% end %>
    </tr>
    </thead>

    <tbody>
    <% @presence.eleves.each do |elefe|  %>
        <tr>
            <% @presences.each do |presence| %>
                <% if elefe.etats.find_by_presence_id(presence.id) %>
                <td><%= elefe.etats.find_by_presence_id(presence.id).etat %></td>
                <% else %>
                <td></td>
                <% end %>
            <% end %>
        </tr>
    <% end %>

    </tbody>

    <tbody>
    <tr>
        <% @presences.each do |presence| %>
            <% if presence %>
            <td><%= presence.enseignant.prenom %> <%= presence.enseignant.nom %></td>
            <% end %>
        <% end %>
    </tr>
    </tbody>
</table>
</div>
</div>
<% else %>
    <br/><p>Il n'y a aucune présence de saisie pour ce cours.</p>
<% end %>
<%= link_to 'Retour', root_path %>

</div>

<!-- <table>
  <thead>
    <tr>
      <th>Datecours</th>
      <th>Etat</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @presences.each do |presence| %>
      <tr>
        <td><%= presence.datecours %></td>
        <td><%= presence.etat %></td>
        <td><%= link_to 'Show', presence %></td>
        <td><%= link_to 'Edit', edit_presence_path(presence) %></td>
        <td><%= link_to 'Destroy', presence, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Presence', new_presence_path %> -->
